<div class="container">

  <div class="contact">

    <div class="userInfo">
      <i class="fas fa-edit editProfil" *ngIf="isButtonVisible()" [routerLink]="['/user/update']" ></i>

      <!-- <img src="/assets/was.png" id="blah" alt="Avatar" /> -->
      <!-- user-compte.component.html -->
      <img src="/assets/was.png" id="blah" alt="Avatar" />

      <div class="contact_card">
        <!-- <span> <i class="fa-solid fa-phone"></i> : </span><br><br> -->
        <span> <i class="fa-solid fa-envelope"></i> : {{profil.email}} </span><br><br>
        <span><i class="fa-solid fa-location-dot"></i> : {{profil?.timezone}} </span>
      </div>
      <div>
        <p>Compétence Principale : {{profil?.mainSkill}} </p>

        <p>Formations : </p>


        <p>Expérience :</p>

      </div>

      <div class="button">
        <button *ngIf="isButtonVisible()" class="edit" (click)="navigateToCvCreer('/cv/edit')">
          <h3>Modifier cv</h3>
        </button>
        <button *ngIf="isButtonVisible()" class="read" (click)="navigateToCvCreer('cv/afficher')">
          <h3>Afficher cv</h3>
        </button>


      </div>
    </div>
    <div class="filter">
      <input type="radio" id="huey" name="drone" value="huey" /> Tri par date la plus <label for="huey"></label><br><br>
      <input type="radio" id="huey" name="drone" value="huey" /> Tri par date la plus <label for="huey"></label>
    </div>

  </div>
  <div class="post">

    <div class="title-container">
      <h3 (click)="pub = true" class="title" [class.underlined]="pub">Publication</h3>
      <h3 (click)="pub = false" class="title" [class.underlined]="!pub">Dashboard</h3>
    </div>
    
    

    <div class="popup-1-wrap">
      <input id="popup-1-coupon" type="checkbox">
      <div class="popup-1-overlay">
        <label for="popup-1-coupon" class="popup-1-trigger"></label>
        <div class="popup-1-content">
          <label for="popup-1-coupon" class="popup-1-close">×</label>
          <app-add-post></app-add-post>

        </div>
      </div>
    </div>





    <article *ngIf="pub===true" class="publication">
      <!--  Send post  -->

      <label  for="popup-1-coupon" class="popup-1-open">

        <img class="add" src="/assets/was.png">
        <div class="input-post">Quoi de neuf</div>
      </label>



      <!--  Publications  -->


      <ng-container *ngIf="posts.content">
        <div *ngFor="let post of posts.content " class="content-publication wrap shadow">
          <button  class="delete" (click)="deletePost(post.id)"><i
              class="fa-regular fa-trash-can"></i></button>

          <div class="heading flex-center">
            <div class="name flex-center">
              <img src="/assets/was.png " alt="User Image">
              <span>{{profil?.anonyme}}</span>
            </div>
            <p class="date">{{post?.date | date : 'shortDate'}}</p>
            <div class="public">
              <p>{{post?.desc}}</p>
              <p>{{post?.reactionsCount}} réactions</p> <!-- Utilisez la propriété reactionsCount pour chaque post -->
            </div>
            <img src="https://placehold.co/600x400" style="width: 150px; height: 100px; border-radius: 0;margin: 5px;"
              alt="Image" *ngFor="let file of post.files">



            <div class="fav">
              <!-- <button class="like" (click)="addnmbrReact(post.id)" ><i class="fa-regular fa-heart"></i></button> -->
              <!-- <button class="like custom-like" (click)="addnmbrReact(post.id)"> {{post?.reactionsCount}} j'aime</button> -->

              <button class="like" (click)="addnmbrReact(post.id)"> {{post?.reactionsCount}} j'aime</button>
              <button class="comment">commentaire</button>
              <button class="share">partager</button>

            </div>
          </div>
        </div>
      </ng-container>

    </article>


    <article *ngIf="pub===false" class="dashboard">
      <app-dashboard></app-dashboard>
    <!-- <article *ngIf="pub===false" class="publication">
       <app-dashboard></app-dashboard> -->

 

    </article>


  </div>

</div>

<!--JAVASCRIPT-->